# .cursorrules 文件
# 执行命令流程
1. **查看同步规则**：确保操作符合项目规范
2. **查看项目下一步**：了解当前执行任务
3. **执行具体操作**：按规范进行开发
4. **更新变更记录**：在.cursorrules文件中记录所有变更

## 基本规则
1. **项目说明**：
   - 项目名称: cs_aiwanba_net
   - 主要功能: Web在线股票交易游戏
   - 开发进度: 初始阶段
   
   核心功能模块:
   1) 公司模块:
      - 公司创建与股票发行
      - 公司收购与合并功能
      - 公司经营决策系统
   
   2) 交易所模块:
      - 实时股票交易系统
      - 市场供需关系计算
      - 实时交易记录
      - 股票价格走势图
   
   3) 银行模块:
      - 资金管理系统
      - 存贷款业务
      - 动态利率调整
   
   4) 市场新闻与事件模块:
      - 玩家驱动的新闻系统
      - 公司公告发布
      - 事件影响计算
   
   5) AI玩家行为模块:
      - AI决策算法
      - 多样化AI角色
      - 市场互动系统
   
   6) 玩家互动与社交模块:
      - 实时聊天系统
      - 论坛讨论
      - 团队合作机制
   
   7) 市场分析工具模块:
      - 数据分析工具
      - 市场趋势分析
      - 实时数据展示

   模块功能细节:
   1) 公司模块详细功能:
      - 公司基础信息管理
        * 公司名称、简介、logo、成立时间等
        * 股本结构、股东信息
        * 公司财务报表
      - 股票发行系统
        * IPO发行定价
        * 增发、配股功能
        * 股票回购机制
      - 公司经营系统
        * 分红派息功能
        * 资产负债管理
        * 投资项目管理
      - 收购合并系统
        * 收购提案
        * 股东投票
        * 合并执行
   
   2) 交易所模块详细功能:
      - 交易核心系统
        * 限价单/市价单
        * 撮合交易引擎
        * 交易手续费计算
      - 行情系统
        * 实时价格推送
        * K线图表展示
        * 成交量分析
      - 交易监管
        * 涨跌幅限制
        * 异常交易监控
        * 交易数据存档
   
   3) 银行模块详细功能:
      - 账户系统
        * 开户、销户
        * 余额查询
        * 资金冻结解冻
      - 存贷款业务
        * 定期存款
        * 信用贷款
        * 抵押贷款
      - 利率系统
        * 基准利率设置
        * 市场利率调节
        * 利息计算
   
   4) 新闻事件模块详细功能:
      - 新闻生成系统
        * 市场行情新闻
        * 公司动态新闻
        * 宏观经济新闻
      - 事件影响系统
        * 事件权重计算
        * 市场影响评估
        * 连锁反应模拟
      - 信息发布系统
        * 实时新闻推送
        * 重要公告置顶
        * 历史新闻归档
   
   5) AI玩家模块详细功能:
      - AI决策系统
        * 市场分析算法
        * 风险评估模型
        * 投资策略生成
      - AI角色系统
        * 角色特征定义
        * 行为模式设置
        * 交互规则设定
      - AI学习系统
        * 市场数据学习
        * 玩家行为学习
        * 策略优化调整
   
   6) 社交系统详细功能:
      - 即时通讯
        * 私聊功能
        * 群聊功能
        * 消息提醒
      - 社区系统
        * 投资论坛
        * 战略讨论
        * 经验分享
      - 团队系统
        * 团队创建管理
        * 权限分配
        * 团队业绩统计
   
   7) 分析工具详细功能:
      - 技术分析工具
        * 均线分析
        * MACD指标
        * KDJ指标
      - 基本面分析
        * 财务报表分析
        * 市场估值分析
        * 行业对比分析
      - 风险分析
        * 波动率分析
        * 仓位管理
        * 止损预警

2. **环境配置**：
   - Python版本: 3.11.9
   - 项目端口: 5010
   - 域名: localhost
   - 项目路径: /www/wwwroot/cs.aiwanba.net
   - 框架: Flask
   - 入口文件: app.py
   - 通讯协议: gunicorn
   
   数据库配置:
   - MySQL版本: 5.7.40
   - 数据库名: cs_aiwanba_net
   - 用户名: cs_aiwanba_net
   - 密码: sQz9HSnF5ZcXj9SX
   - 主机: localhost
   - 端口: 3306

   依赖管理:
   - 使用 requirements.txt 管理依赖
   - 镜像源: https://pypi.tuna.tsinghua.edu.cn/simple
   - 安装命令: pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

3. **编码标准**：
   - 代码要整洁规范，使用2空格缩进，结尾加分号，字符串用单引号
   - 文件和组件用大写开头，变量函数用小写开头，CSS类名用横线连接
   - 复杂的代码要写注释说明用途和原理
   
   模块命名规范:
   - 公司模块相关: Company*
   - 交易所模块相关: Exchange*
   - 银行模块相关: Bank*
   - 新闻模块相关: News*
   - AI模块相关: AI*
   - 社交模块相关: Social*
   - 分析工具相关: Analysis*

4. **文件记录**：
   - 记录新建的文件和用途
   - 记录修改的内容
   - 记录版本号和变更说明

5. **开发计划**：
   第一阶段:
   - [ ] 数据库设计
   - [ ] 基础架构搭建
   - [ ] 用户系统开发
   
   第二阶段:
   - [ ] 公司模块开发
   - [ ] 交易所模块开发
   - [ ] 银行模块开发
   
   第三阶段:
   - [ ] AI系统开发
   - [ ] 新闻系统开发
   - [ ] 社交系统开发
   
   第四阶段:
   - [ ] 分析工具开发
   - [ ] 系统集成测试
   - [ ] 性能优化

6. **部署配置**：
   启动配置:
   - 启动命令: gunicorn -c gunicorn_conf.py app:app
   
   Gunicorn配置(/www/wwwroot/cs.aiwanba.net/gunicorn_conf.py):
   - workers: 4
   - threads: 2
   - user: www
   - worker_class: uvicorn.workers.UvicornWorker
   - bind: 0.0.0.0:5010
   - pidfile: /www/wwwroot/cs.aiwanba.net/gunicorn.pid
   
   日志配置:
   - 访问日志: /www/wwwlogs/python/cs_aiwanba_net/gunicorn_acess.log
   - 错误日志: /www/wwwlogs/python/cs_aiwanba_net/gunicorn_error.log
   - 日志级别: info

7. **数据库设计规范**：
   表命名规范:
   - 公司相关表: company_*
   - 交易相关表: trade_*
   - 银行相关表: bank_*
   - 新闻相关表: news_*
   - AI相关表: ai_*
   - 社交相关表: social_*
   - 分析相关表: analysis_*
   
   字段命名规范:
   - 主键统一使用: id
   - 创建时间: created_at
   - 更新时间: updated_at
   - 删除标记: is_deleted
   - 状态字段: status

8. **安全规范**：
   - 交易安全
     * 资金加密传输
     * 交易签名验证
     * 防重放攻击
   - 数据安全
     * 敏感数据加密
     * 数据备份策略
     * 访问权限控制
   - 系统安全
     * DDoS防护
     * SQL注入防护
     * XSS防护

9. **性能规范**：
   - 响应时间
     * API响应 < 100ms
     * 页面加载 < 2s
     * 实时数据推送延迟 < 500ms
   - 并发处理
     * 单服务器支持1000并发
     * 可水平扩展
   - 数据处理
     * 批量处理优化
     * 缓存策略
     * 异步处理