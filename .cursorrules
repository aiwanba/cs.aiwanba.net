# .cursorrules 文件
# 本文件用于记录项目的规范和配置信息。请根据项目实际情况填写以下内容。

## 重要提示
- 每次编写代码完成后，必须更新 .cursorrules 文件(检查更新本文件)，确保涵盖以下关键内容：
  - 项目背景：明确项目的目标和范围。
  - 编码标准：定义代码风格、命名规范等。
  - 首选库：列出项目中使用的库及其版本。
  - 文件结构：描述项目的目录结构和文件组织方式。
  - 性能优化指南：提供性能优化的建议和最佳实践。
  - 测试要求：明确测试的范围、方法和工具。
  - 文档规范：规定代码注释、README 文件等的编写标准。
  - 错误处理：定义错误处理机制和日志记录方式。
  - 项目下一步：明确项目下一步的计划和目标。
- 所有文件操作（创建、添加、修改、更新、优化、删除）必须记录序列号、文件名称和文件描述。

## 文件变更记录
# 请在此记录所有文件操作，包括创建、添加、修改、更新、优化和删除。

### 创建文件
| 序列号 | 文件名称 | 文件描述 |
|-------|----------|----------|

### 添加文件
| 序列号 | 文件名称 | 文件描述 |
|-------|----------|----------|

### 修改文件
| 序列号 | 文件名称 | 文件描述 |
|-------|----------|----------|

### 更新文件
| 序列号 | 文件名称 | 文件描述 |
|-------|----------|----------|
| 1 | .cursorrules | 整合生产环境部署配置信息，更新项目背景、文件结构和错误处理部分 |
| 2 | .cursorrules | 更新项目下一步，记录 AI 系统功能的实现 |
| 3 | app.py | 添加 AI 玩家和 AI 交易功能 |
| 4 | sql/init.sql | 添加 AI 玩家和 AI 交易表结构 |

### 优化文件
| 序列号 | 文件名称 | 文件描述 |
|-------|----------|----------|

### 删除文件
| 序列号 | 文件名称 | 文件描述 |
|-------|----------|----------|

## 项目背景
# 这是一个基于Flask框架的Web应用项目，部署在Linux服务器上，使用Gunicorn作为WSGI服务器，MySQL作为数据库。项目目标是提供一个稳定可靠的Web服务。

## 编码标准
# 请在此定义项目的代码风格和命名规范。

## 首选库
# 请在此列出项目中使用的库及其版本，并说明选择理由。

## 文件结构
# 项目主要文件结构如下：
# - /www/wwwroot/cs.aiwanba.net/ 项目根目录
#   - app.py 应用入口文件
#   - gunicorn_conf.py Gunicorn配置文件
#   - requirements.txt 依赖包文件
# - /www/wwwlogs/python/cs_aiwanba_net/ 日志目录
#   - gunicorn_acess.log 访问日志
#   - gunicorn_error.log 错误日志

## 性能优化指南
# 请在此提供性能优化的建议和最佳实践。

## 测试要求
# 请在此明确测试的范围、方法和工具。

## 文档规范
# 请在此规定代码注释、README 文件等的编写标准。

## 错误处理
# 项目采用以下错误处理机制：
# 1. 日志记录：
#   - 访问日志：/www/wwwlogs/python/cs_aiwanba_net/gunicorn_acess.log
#   - 错误日志：/www/wwwlogs/python/cs_aiwanba_net/gunicorn_error.log
# 2. 日志级别：
#   - debug: 调试级别
#   - info: 普通级别
#   - warning: 警告消息
#   - error: 错误消息
#   - critical: 严重错误消息
# 3. 默认日志级别为info

## 项目下一步 (注意下一步不能删除，用备注描述是否实现)
# 1. 这是多人在线的股票交易游戏程序：
#   - 股票系统：
#     - 每个股票代表一家公司
#     - 公司基本信息：
#       - 公司名称
#       - 创建时间
#       - 所属玩家
#       - 初始资金
#     - 股票交易：
#       - 玩家可以买卖股票
#       - 支持市价单和限价单
#       - 实时更新股票价格
#     - 公司控制权：
#       - 持有超过51%股份的玩家获得公司控制权
#       - 控制权玩家可以决定公司运营方向
#     - 公司合并：
#       - 当一家公司持有另一家公司100%股份时
#       - 两家公司自动合并
#       - 新公司继承原公司资产
#   - 银行系统:
#     - 银行系统需要记录每笔交易，并记录每家公司的账户余额，每家公司有独立的账户
#     - 提供存款、取款、转账等基本功能
#     - 记录每笔交易的详细信息：交易时间、交易类型、交易金额、交易双方
#   - 交易系统:
#     - 交易系统需要记录每家公司的交易情况，每家公司有独立的交易记录
#     - 记录每笔交易的详细信息：交易时间、交易类型、交易数量、交易价格
#     - 提供交易历史查询功能
#   - AI系统:
#     - AI玩家由AI系统管理，AI系统可以创建AI玩家，并可以进行交易
#     - 要具备智能化根据公司系统、银行系统、股票系统、交易系统的数据分析，进行交易股票决策
#     - AI玩家应具备不同的交易策略：保守型、激进型、平衡型
#     - AI玩家可以学习其他玩家的交易模式，不断优化自己的交易策略
# 备注：AI 系统已实现，包括创建 AI 玩家、获取 AI 玩家信息、AI 玩家进行交易、查询 AI 交易历史等功能。

### 1.1 服务器环境
- 部署路径：/www/wwwroot/cs.aiwanba.net
- 域名：localhost (注意：不要用绝对路径)
- 端口：5010
- 运行用户：www
- 管理工具：宝塔面板

### 1.2 数据库配置
- 数据库: MySQL 5.7.40
- 数据库名: cs_aiwanba_net
- 用户名: cs_aiwanba_net
- 密码: sQz9HSnF5ZcXj9SX
- 主机: localhost
- 端口: 3306

### 1.3 Python环境
- Python版本：3.11.9
- Web框架：Flask
- WSGI服务器：Gunicorn
- 启动方式：
  - 命令行启动：python app.py
  - uwsgi
  - gunicorn(推荐)
- 入口文件：/www/wwwroot/cs.aiwanba.net/app.py
- 应用名称：app

### 1.4 依赖包
- 用文件requirements.txt

### 1.5 Gunicorn配置
- 配置文件：/www/wwwroot/cs.aiwanba.net/gunicorn_conf.py