# 股票交易游戏设计文档

## 核心设计理念
- 完全玩家驱动经济：所有数据均由玩家交易行为产生
- 去随机化：不设置NPC、不生成随机事件，所有变化来自玩家决策
- 实时市场反馈：玩家行为即时影响市场
- 全天候交易市场：现实时间24小时连续交易
- 个人开发者，不要太复杂
- 游戏模块包括：公司模块 银行模块 交易所模块 消息模块，这四个模块是相互关联的；暂时不需要要别的模块，帮我完善模块。

## 游戏模块设计

### 1. 公司模块
#### 1.1 公司创建
- 玩家使用初始资金（如1000万游戏币）注册公司
- 基础信息设置：
  - 公司名称（需唯一）
  - 初始股价（固定10元）
  - 总股本（固定100万股）
  - 行业分类（制造业/科技/服务等基础分类）

#### 1.2 股权结构
- 创始人初始持股比例 = 初始资金 / (股价×总股本)
- 最低持股要求：
  * 创始人必须持有≥20%股份
  * 低于20%时系统自动提醒需要回购

#### 1.3 公司经营
- 基础操作：
  1. 分红：每股分配现金
  2. 回购：从市场买入公司股票
- 3. 增发：发行新股
- 4. 公司收购：收购其他公司
- 回购规则简化：
  * 资金上限：公司现金的30%
  * 回购价格：不超过近5日均价
  * 回购的股票自动注销

#### 1.4 财务系统
- 收入：
  * 交易手续费（0.1%）
  * 股东投资
- 支出：
  * 分红
  * 系统维护费（固定每日100元）
- 现金管理：
  * 现金不足时不能分红和回购

#### 1.5 破产机制
- 触发条件：连续24小时现金为负
- 清算流程：
  1. 公司股票永久停牌
  2. 剩余现金按持股比例分配
  3. 创始人需72小时后才能创建新公司
- 债务清算顺序：
  1. 员工工资（如有）
  2. 银行贷款
  3. 股东权益

### 2. 银行模块
#### 2.0 银行体系架构
- 游戏银行：
  - 提供基础存贷服务
  - 固定利率，简单操作

#### 2.1 核心功能
- 存款业务：
  * 活期：随存随取
  * 定期：7天
- 贷款业务：
  * 股票质押贷款
  * 最高可贷：股票市值的50%
- 利率设置：
  * 存款利率：
    - 活期：0.003%/日
    - 7天定期：0.01%/日
  * 贷款利率：
    - 统一利率：0.02%/日

#### 2.2 利率机制
- 基准利率：0.01%/日
- 存款利率：
  * 活期：0.003%/日
  * 7天定期：0.01%/日
- 贷款利率：
  * 统一利率：0.02%/日

#### 2.3 风险控制
- 基本规则：
  * 单笔贷款上限：股票市值的50%
  * 质押股票跌破贷款金额120%时强制平仓
  * 逾期利率：0.04%/日（正常利率的2倍）
- 预警机制：
  * 当股票市值接近贷款金额130%时发出预警
  * 提醒用户及时补充保证金或还款

#### 2.4 银行经营

### 3. 交易所模块
#### 3.1 交易机制
- 基础规则：
  * 最小交易：100股
  * 交易时间：全天24小时
- 订单类型：
  * 只支持市价单：以当前最优价格成交

#### 3.2 市场监控
- 交易限制：
  * 大单提醒：单笔超过总股本1%
- 信息披露：
  * 大股东增减持（超过5%）
  * 公司回购/增发计划
  * 破产清算公告

#### 3.3 数据服务
- 基础行情：
  * 当前价/涨跌幅/成交量
  * 买卖一档价格和数量
  * 日K线图表
- 公司信息：
  * 总股本/流通股
  * 主要股东名单
  * 最近交易记录

### 4. 消息模块
- 重要提醒：
  * 股价大幅波动（涨跌超过50%）
  * 大额交易（超过1%股本）
  * 公司重大行为（分红/回购等）
- 系统公告：
  * 新公司上市
  * 公司破产
  * 重大政策变化

## 跨模块清算机制
### 1. 破产清算
- 触发条件：
  * 公司现金为负超过24小时
  * 银行贷款逾期超过7天
- 处理流程：
  1. 停止所有交易
  2. 清算剩余资产
  3. 按顺序偿还债务
  4. 剩余资金分配给股东
